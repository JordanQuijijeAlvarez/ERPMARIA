<div class="login">
  <div class="login__container">
    <div class="login__left">
      <!-- Header with Icon -->
      <div class="login__header">
        <div class="login__icon">
          <i></i>
        </div>
        <h1 class="login__title">
          Minimarket María
        </h1>
        <h2 class="login__subtitle">
          Sistema de Gestión de Negocio
        </h2>
        <p class="login__description">
          Inicie sesión para acceder al sistema
        </p>
      </div>

      <!-- Login Form -->
      <form class="login__form" [formGroup]="formLogin" (ngSubmit)="Login()">
        <!-- Username Field -->
        <div class="login__field">
          <label class="login__label" for="username">
            <i class="fas fa-user login__label-icon"></i>
            Nombre de Usuario
          </label>
          <input
            class="login__input"
            type="text"
            formControlName="usuario"
            id="username"
            autocomplete="username"
            placeholder="Ingrese su nombre de usuario"
          />
        </div>

        <!-- Password Field -->
        <div class="login__field">
          <label class="login__label" for="password">
            <i class="fas fa-lock login__label-icon"></i>
            Contraseña
          </label>
          <input
            class="login__input"
            type="password"
            formControlName="password"
            id="password"
            autocomplete="current-password"
            placeholder="Ingrese su contraseña"
          />
        </div>

        <!-- 2FA Token Field (Solo se muestra si se requiere) -->
        <div class="login__field" *ngIf="requires2FA">
          <label class="login__label" for="token2fa">
            <i class="fas fa-shield-alt login__label-icon"></i>
            Código de Autenticación (2FA)
          </label>
          <input
            class="login__input"
            type="text"
            formControlName="token2fa"
            id="token2fa"
            maxlength="6"
            placeholder="000000"
            style="text-align: center; letter-spacing: 0.5rem; font-size: 1.2rem;"
          />
          <small style="color: #666; font-size: 0.85rem; margin-top: 0.25rem; display: block;">
            Ingresa el código de 6 dígitos de tu app de autenticación
          </small>
        </div>

        <!-- Error Message -->
        <div *ngIf="errorMessage" style="background: #f8d7da; color: #721c24; padding: 0.75rem; border-radius: 6px; margin-bottom: 1rem; font-size: 0.9rem;">
          <i class="fas fa-exclamation-circle"></i>
          {{ errorMessage }}
        </div>

        <!-- Forgot Password Link -->
        <div class="login__forgot" >
          <a [routerLink]="['/login/recuperacion', Getusername]">
            ¿Has olvidado tu contraseña?
          </a>
        </div>

        <!-- Login Button -->
        <button
          class="login__button"
          type="submit"
          [disabled]="!formLogin.valid"
        >
          <i class="fas fa-sign-in-alt"></i>
          Acceder al Sistema
        </button>
      </form>

      <!-- Additional Info -->
      <div class="login__signup">
        <p>
          Sistema protegido. Solo personal autorizado.
        </p>
      </div>
    </div>
    <div class="login__right">
      <img src="assets/images/login_recortado.png" type="image/png" alt="Minimarket María" class="login__image" />
    </div>
  </div>
</div>
