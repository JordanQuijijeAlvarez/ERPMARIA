

<!-- Header Section -->
<div style="padding: 24px;">
  <!-- Title and Actions Bar -->
  <div class="card">
    <div class="card__header">
      <h2 class="card__title">
        GESTIÓN DE CLIENTES
      </h2>
      <p class="card__subtitle">Administre la información de los clientes registrados en el sistema</p>
    </div>
    
    <!-- Search and Actions -->
    <div style="display: flex; gap: 16px; margin-top: 16px;">
      <!-- Search Input -->
      <div class="search-box">
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (input)="onSearch($any($event.target).value)"
          class="search-box__input"
          placeholder="Buscar cliente por nombre, cédula, teléfono, email..."
        />
        <div class="search-box__icon">
          <i class="fas fa-search"></i>
        </div>
        
        <!-- Clear search button -->
        <button
          *ngIf="isSearching"
          type="button"
          (click)="clearSearch()"
          class="search-box__clear"
          title="Limpiar búsqueda"
        >
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Patients Table -->
  <div class="table-container" style="margin-top: 24px;">
    <div class="table-header">
      <div style="display: flex; align-items: center; gap: 16px;">
        <h3 class="table-header__title">
          <i class="fas fa-users"></i>
          Clientes Registrados
        </h3>
        
        <!-- Search indicator -->
        <div *ngIf="isSearching" class="badge badge--info">
          <i class="fas fa-search"></i>
          <span>{{ filteredClientes.length }} resultado(s) para "{{ searchTerm }}"</span>
          <button 
            (click)="clearSearch()"
            class="search-box__clear"
            title="Limpiar búsqueda"
            style="position: static; transform: none;"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      
      <!-- New Patient Button -->
      <a routerLink="../crearCliente">
        <button type="button" class="btn btn--primary">
          <i class="fas fa-user-plus"></i>
          <span>Nuevo Cliente</span>
        </button>
      </a>
    </div>
    
    <div>
      <table class="table">
        <thead>
          <tr>
            <th>
              <i class="fas fa-id-card"></i>
              Cédula
            </th>
            <th>
              <i class="fas fa-user"></i>
              Cliente
            </th>
            <th>
              <i class="fas fa-map-marker-alt"></i>
              Dirección
            </th>
            <th>
              <i class="fas fa-envelope"></i>
              Email
            </th>
            <th>
              <i class="fas fa-cogs"></i>
              Acciones
            </th>
          </tr>
        </thead>
        <tbody>
          <!-- No results message -->
          <tr *ngIf="filteredClientes.length === 0">
            <td colspan="5">
              <div class="table__empty">
                <div class="table__empty-icon">
                  <i class="fas fa-search" *ngIf="isSearching"></i>
                  <i class="fas fa-users" *ngIf="!isSearching"></i>
                </div>
                <div>
                  <p *ngIf="isSearching"><strong>No se encontraron clientes</strong></p>
                  <p *ngIf="!isSearching"><strong>No hay clientes registrados</strong></p>
                  <p *ngIf="isSearching">
                    No hay clientes que coincidan con "{{ searchTerm }}"
                  </p>
                  <p *ngIf="!isSearching">
                    Comience agregando un nuevo cliente al sistema
                  </p>
                </div>
                <button 
                  *ngIf="isSearching"
                  (click)="clearSearch()"
                  class="btn btn--outline btn--sm"
                  style="margin-top: 16px;"
                >
                  <i class="fas fa-times"></i>
                  Limpiar búsqueda
                </button>
              </div>
            </td>
          </tr>
          
          <!-- Patient rows -->
          <tr *ngFor="let clientes of paginatedClientes">
            <td>
              <div style="display: flex; align-items: center; gap: 12px;">
                <i class="fas fa-id-card"></i>
                <span>{{clientes.client_cedula}}</span>
              </div>
            </td>
            <td>
              <div style="display: flex; align-items: center; gap: 12px;">
                <i class="fas fa-user"></i>
                <span>{{clientes.client_nombres}} {{clientes.client_apellidos}}</span>
              </div>
            </td>
            <td title="{{clientes.client_direccion}}">{{clientes.client_direccion}}</td>
            <td title="{{clientes.client_correo}}">{{clientes.client_correo}}</td>
            <td>
              <div class="table__actions">
                <!-- Edit Button -->
                <button
                  (click)="Actualizarcliente(clientes.client_id)"
                  type="button"
                  title="Editar cliente"
                  class="btn btn--warning btn--sm btn--icon"
                >
                  <i class="fas fa-pen"></i>
                </button>
                
                <!-- Delete Button -->
                <button
                  *appMostrarSiRol="['administrador']"
                  (click)="eliminarcliente(clientes.client_id, clientes.client_nombres+' '+clientes.client_apellidos)"
                  type="button"
                  title="Eliminar cliente"
                  class="btn btn--danger btn--sm btn--icon"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Pagination Section -->
    <div *ngIf="totalItems > 0" class="pagination">
      <!-- Results info y selector de items por página -->
      <div class="pagination__info">
        <div class="pagination__text">
          Mostrando <span>{{ getItemRange().start }}-{{ getItemRange().end }}</span> de <span>{{ totalItems }}</span> clientes
        </div>
        
        <!-- Selector de items por página -->
        <div class="pagination__select-wrapper">
          <label for="itemsPerPage">Mostrar:</label>
          <select 
            id="itemsPerPage"
            (change)="changeItemsPerPage(+$any($event.target).value)"
            [value]="itemsPerPage"
            class="pagination__select"
          >
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
          <span>por página</span>
        </div>
      </div>
      
      <!-- Pagination controls -->
      <div class="pagination__controls">
        <button
          type="button"
          (click)="previousPage()"
          [disabled]="currentPage === 1"
          class="pagination__button"
        >
          <i class="fas fa-chevron-left"></i>
          Anterior
        </button>
        
        <div class="pagination__numbers">
          <button
            *ngFor="let page of getPageNumbers()"
            type="button"
            (click)="goToPage(page)"
            [class.pagination__number--active]="page === currentPage"
            class="pagination__number"
          >
            {{ page }}
          </button>
          
          <!-- Ellipsis for large page counts -->
          <span *ngIf="totalPages > 5 && currentPage < totalPages - 2">...</span>
        </div>
        
        <button
          type="button"
          (click)="nextPage()"
          [disabled]="currentPage === totalPages"
          class="pagination__button"
        >
          Siguiente
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal comentado para referencia futura -->
<!-- 
<div data-dialog-backdrop="dialog" data-dialog-backdrop-close="true" class="absolute left-0 top-0 inset-0 z-[999] grid h-screen w-screen place-items-center bg-black bg-opacity-60 backdrop-blur-sm transition-opacity duration-300">
  <div data-dialog="dialog" class="relative mx-auto flex w-full max-w-[24rem] flex-col rounded-xl bg-white bg-clip-border text-slate-700 shadow-md">
    <div class="flex flex-col p-6">
      <h4 class="text-2xl mb-1 font-semibold text-slate-700">Edit Member Details</h4>
      <p class="mb-3 mt-1 text-slate-400">Enter or reset each information for the member access.</p>
    </div>
  </div>
</div> 
-->
