<form [formGroup]="frmProducto" (ngSubmit)="guardarproducto()">
  <div class="producto-form">
    <div class="card">
      <div class="card__header">
        <div class="card__title-group">
          <h2 class="card__title">
            {{ eventoUpdate ? 'ACTUALIZAR PRODUCTO' : 'REGISTRO DE PRODUCTO' }}
          </h2>
          <p class="card__subtitle">
            {{ eventoUpdate ?
            'Modifique la información del producto según sea necesario' : 
            'Complete la información del nuevo producto' }}
          </p>
        </div>
      </div>

      <div class="card__body">
        <div class="producto-form__section-header">
          <h3 class="producto-form__section-title">
            <i class="fas fa-box"></i>
            Información del Producto
          </h3>
        </div>

        <div class="producto-form__fields">
          <!-- Codigo Barras - Full Width -->
          <div class="form-group producto-form__field--full">
            <label class="form-label">
              <i class="fas fa-barcode"></i>
              Código de Barras *
            </label>
            <input
              class="form-input"
              formControlName="txtCodigobarras"
              type="text"
              id="codigobarras"
              placeholder="Ingresa el código (13 dígitos)"
              maxlength="13"
            />
            <app-validators
              [control]="frmProducto.get('txtCodigobarras')!"
              [showCounter]="true"
              [expectedLength]="13">
            </app-validators>
          </div>

          <!-- Nombres - Full Width -->
          <div class="form-group producto-form__field--full">
            <label class="form-label">
              <i class="fas fa-tag"></i>
              Nombre del Producto *
            </label>
            <input
              class="form-input"
              formControlName="txtNombres"
              type="text"
              id="nombres"
              placeholder="Ejemplo: Aceite Palma de oro"
            />
            <app-validators [control]="frmProducto.get('txtNombres')!"></app-validators>
          </div>

          <!-- Descripcion - Full Width -->
          <div class="form-group producto-form__field--full">
            <label class="form-label">
              <i class="fas fa-align-left"></i>
              Descripción *
            </label>
            <input
              class="form-input"
              formControlName="txtDescripcion"
              type="text"
              id="descripcion"
              placeholder="Ejemplo: Producto de cocina"
            />
            <app-validators [control]="frmProducto.get('txtDescripcion')!"></app-validators>
          </div>

          <!-- Subcategorias - Full Width -->
          <div class="form-group producto-form__field--full">
            <label class="form-label">
              <i class="fas fa-list"></i>
              Subcategoría *
            </label>
            <div class="producto-form__select-with-button">
              <select class="form-select" formControlName="cbxSubcategoria" id="subcategoria">
                <option value="" disabled selected>
                  Seleccione una subcategoría
                </option>
                <option *ngFor="let subcategoria of listaSubcategorias" [value]="subcategoria.subcat_id">
                  {{ subcategoria.subcat_nombre }}
                </option>
              </select>
              <button
                class="btn btn--primary btn--icon producto-form__add-button"
                type="button"
                (click)="abrirModalAgregarSubcategoria()"
                title="Agregar nueva subcategoría rápidamente"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
            <app-validators [control]="frmProducto.get('cbxSubcategoria')!"></app-validators>
          </div>

          <!-- precio compra -->
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-dollar-sign"></i>
              Precio de Compra *
            </label>
            <input
              class="form-input"
              formControlName="txtpreciocompra"
              type="text"
              id="preciocompra"
              placeholder="0.00"
            />
            <app-validators [control]="frmProducto.get('txtpreciocompra')!"></app-validators>
          </div>

          <!-- precio venta -->
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-dollar-sign"></i>
              Precio de Venta *
            </label>
            <input
              class="form-input"
              formControlName="txtprecioventa"
              type="text"
              id="precioventa"
              placeholder="0.00"
            />
            <app-validators [control]="frmProducto.get('txtprecioventa')!"></app-validators>
          </div>

          <!-- stock -->
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-warehouse"></i>
              Stock del Producto *
            </label>
            <input
              class="form-input"
              formControlName="txtstock"
              type="number"
              id="stock"
              placeholder="0"
            />
            <app-validators [control]="frmProducto.get('txtstock')!"></app-validators>
          </div>
          
          <!-- stock minimo -->
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-exclamation-triangle"></i>
              Stock Mínimo *
            </label>
            <input
              class="form-input"
              formControlName="txtstockminimo"
              type="number"
              id="stockminimo"
              placeholder="0"
            />
            <app-validators [control]="frmProducto.get('txtstockminimo')!"></app-validators>
          </div>

        </div>
      </div>



      <div class="card__footer">
        <div class="producto-form__actions">
          <button
            class="btn btn--outline"
            type="button"
            (click)="salirSinGuardar()"
          >
            <i class="fas fa-times"></i>
            Cancelar
          </button>
          <button
            class="btn btn--primary"
            type="submit"
          >
            <i class="fas fa-save"></i>
            {{ eventoUpdate ? 'Actualizar Producto' : 'Guardar Producto' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</form>